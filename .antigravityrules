# Project Rules & Conventions

## UI/UX Guidelines

### Modal Behavior
1. **Closing Mechanism**:
   - **ESC Key**: MUST be enabled for all modals to allow quick closing.
   - **Backdrop Click**: MUST be disabled (or require explicit check) to prevent accidental closing and data loss.

2. **Nested Modal Handling (Event Propagation)**:
   - **Stop Propagation**: All `ESC` key event handlers in modals MUST include `e.stopPropagation()` and `e.preventDefault()`.
     ```javascript
     const handleKeyDown = (e) => {
       if (e.key === 'Escape') {
         e.preventDefault();
         e.stopPropagation(); // Prevents closing parent modals
         onClose();
       }
     };
     ```
   - **Priority Logic**: When multiple modals can be open simultaneously (stacked), the lower-layer modal listeners MUST check for the existence/open state of upper-layer modals.
     ```javascript
     // In Parent Modal
     if (childModal.isOpen) return; // Yield to child modal
     ```
